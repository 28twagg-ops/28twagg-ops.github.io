<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PIXEL-NET Arcade</title>

  <!-- Optional: Retro font for headings -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <header class="site-header">
    <div class="brand">
      <div class="brand-mark">PX</div>
      <div class="brand-text">
        <div class="brand-title">PIXEL-NET</div>
        <div class="brand-subtitle">Online Arcade Network</div>
      </div>
    </div>

    <nav class="nav">
      <a class="nav-link" href="#featured-game">Featured</a>
      <a class="nav-link" href="#game-library">Library</a>
      <a class="nav-link" href="#top-dogs">Top Dogs</a>
    </nav>
  </header>

  <main class="wrap">

    <!-- Featured Game -->
    <section id="featured-game" class="section">
      <div class="featured-card">
        <div class="featured-media">
          <!-- This src gets replaced by JS with first game's thumb -->
          <img id="featuredThumb" src="assets/millipede_thumb.png" alt="Featured Game">
          <div class="featured-glow"></div>
          <div class="scanlines"></div>
        </div>

        <div class="featured-info">
          <span class="badge">Game of the Week</span>
          <h2 id="featuredTitle">Loading…</h2>
          <p id="featuredDesc">Featured game rotates weekly. Top the leaderboard and hold it.</p>
          <button id="featuredPlay" class="btn">Play Featured</button>
        </div>
      </div>
    </section>

    <!-- Game Library -->
    <section id="game-library" class="section">
      <div class="section-head">
        <h3>Arcade Floor</h3>
        <p class="muted">Pick a cabinet. Click to play.</p>
      </div>

      <!-- Your existing JS populates this -->
      <div id="arcadeGrid" class="game-grid"></div>
    </section>

    <!-- Top Dogs -->
    <section id="top-dogs" class="section topdogs">
      <div class="section-head">
        <h3>Top Dogs</h3>
        <p class="muted">Players holding top scores the longest. Prestige only.</p>
      </div>

      <!-- Placeholder UI (static for now). Later you can wire it to a leaderboard file if you want. -->
      <ul class="player-list">
        <li>
          <div class="player-name">TJW</div>
          <div class="player-details">
            <span class="pill">HOLDEM</span>
            <span class="score">4,109</span>
            <span class="held-time">Held 14 days</span>
          </div>
        </li>
        <li>
          <div class="player-name">CSK</div>
          <div class="player-details">
            <span class="pill">BLACKJACK</span>
            <span class="score">3,085</span>
            <span class="held-time">Held 9 days</span>
          </div>
        </li>
        <li>
          <div class="player-name">RZX</div>
          <div class="player-details">
            <span class="pill">NEON CHASE</span>
            <span class="score">987,450</span>
            <span class="held-time">Held 21 days</span>
          </div>
        </li>
      </ul>
    </section>

    <!-- Optional Explore Zone -->
    <section id="explore-zone" class="section">
      <div class="section-head">
        <h3>Explore</h3>
        <p class="muted">Seasonal themes, CRT vibe, and future features live here.</p>
      </div>

      <div class="explore-grid">
        <div class="explore-card">
          <div class="explore-title">Season Themes</div>
          <div class="muted">Swap palettes by toggling a single class on &lt;body&gt;.</div>
        </div>
        <div class="explore-card">
          <div class="explore-title">CRT Aesthetic</div>
          <div class="muted">Scanlines + glow + subtle curvature, kept tasteful.</div>
        </div>
        <div class="explore-card">
          <div class="explore-title">Leaderboard Prestige</div>
          <div class="muted">“Top Dogs” honors long-held highscores.</div>
        </div>
      </div>
    </section>

  </main>

  <footer class="footer wrap">
    <div class="muted">PIXEL-NET • Static GitHub Pages • v4</div>
  </footer>

  <script>
    // Minimal loader: fetch games.json and populate grid
    async function loadGames() {
      try {
        const response = await fetch('./games.json');
        if (!response.ok) throw new Error('Failed to load games.json');

        const games = await response.json();

        // FEATURED: pick first game as default (you can change later)
        const featured = games[0];
        if (featured) {
          const ft = document.getElementById('featuredThumb');
          const tt = document.getElementById('featuredTitle');
          const play = document.getElementById('featuredPlay');

          ft.src = featured.thumb || ft.src;
          tt.textContent = featured.name || 'Featured Game';

          play.onclick = () => {
            if (featured.type === 'iframe' && featured.path) {
              window.location.href = featured.path;
            } else if (featured.script) {
              const script = document.createElement('script');
              script.src = featured.script;
              document.body.appendChild(script);
              window.scrollTo({ top: document.getElementById('game-library').offsetTop - 10, behavior: 'smooth' });
            }
          };
        }

        // GRID
        const grid = document.getElementById('arcadeGrid');
        grid.innerHTML = '';

        games.forEach(game => {
          const card = document.createElement('div');
          card.className = 'game-card';

          const img = document.createElement('img');
          img.src = game.thumb;
          img.alt = game.name;

          const title = document.createElement('h4');
          title.textContent = game.name;

          card.appendChild(img);
          card.appendChild(title);

          card.onclick = () => {
            if (game.type === 'iframe') {
              window.location.href = game.path;
            } else if (game.script) {
              const script = document.createElement('script');
              script.src = game.script;
              document.body.appendChild(script);
            }
          };

          grid.appendChild(card);
        });

      } catch (err) {
        console.error('ERROR loading games:', err);
      }
    }

    loadGames();
  </script>

</body>
</html>
