<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PIXEL-NET ARCADE</title>
    <link rel="icon" type="image/png" href="assets/millipede_thumb.png">
    <style>
        :root { --neon-green: #0f0; --neon-pink: #ff00ff; --neon-blue: #0ff; }
        body { background-color: #050505; color: var(--neon-green); font-family: 'Courier New', monospace; margin: 0; overflow-x: hidden; }
        
        /* Scanlines */
        body::after {
            content: " "; display: block; position: fixed; inset: 0;
            background: linear-gradient(rgba(18,16,16,0) 50%, rgba(0,0,0,0.1) 50%), linear-gradient(90deg, rgba(255,0,0,0.03), rgba(0,255,0,0.01), rgba(0,0,255,0.03));
            z-index: 999; background-size: 100% 2px, 3px 100%; pointer-events: none;
        }

        .header { display: flex; justify-content: space-between; padding: 20px 40px; border-bottom: 2px solid var(--neon-green); background: #000; }
        .logo { font-size: 2em; font-weight: bold; text-shadow: 3px 3px var(--neon-pink); }

        .container { max-width: 1400px; margin: 0 auto; padding: 20px; display: grid; grid-template-columns: 3fr 1fr; gap: 30px; }

        /* LARGE GAME GRID */
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(350px, 1fr)); gap: 40px; }
        
        /* CABINET CARD - FULL IMAGE PREVIEW */
        .cabinet {
            background: #111; border: 2px solid #333; transition: 0.3s; cursor: pointer;
            display: flex; flex-direction: column; overflow: hidden; /* Clips image to corners */
            position: relative;
        }
        .cabinet:hover { border-color: var(--neon-green); transform: translateY(-10px); box-shadow: 0 0 30px var(--neon-green); }
        
        .cabinet img { 
            width: 100%; height: 320px; 
            object-fit: cover; /* Fills the top/left/right entirely */
            display: block;
            border-bottom: 2px solid #222;
        }

        .cab-footer {
            padding: 15px; background: #000; color: #fff;
        }
        .cab-title { font-size: 1.6em; font-weight: bold; color: var(--neon-blue); margin-bottom: 5px; }
        .cab-desc { font-size: 0.9em; color: #888; line-height: 1.4; }

        /* MODALS */
        #tutorialScreen, #loginScreen {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98);
            z-index: 2000; align-items: center; justify-content: center;
        }
        .modal-box {
            background: #000; border: 4px solid var(--neon-blue); padding: 40px;
            max-width: 500px; text-align: center; box-shadow: 0 0 40px var(--neon-blue);
        }

        #gameOverlay {
            display: none; position: fixed; inset: 0; background: #000;
            z-index: 3000; flex-direction: column; align-items: center; justify-content: center;
        }
        .game-frame { border: 5px solid #fff; box-shadow: 0 0 50px #fff; }
    </style>
</head>
<body>

    <div id="loginScreen">
        <div class="modal-box" style="border-color: var(--neon-pink); box-shadow: 0 0 40px var(--neon-pink);">
            <h1 style="color:var(--neon-pink)">ENTER INITIALS</h1>
            <input type="text" id="playerInitials" maxlength="3" style="background:#111; border:2px solid var(--neon-pink); color:#fff; font-size:3em; text-align:center; width:180px; margin: 20px 0; outline:none;">
            <br>
            <button onclick="saveInitials()" style="background:var(--neon-pink); color:white; padding:15px 50px; border:none; font-weight:bold; cursor:pointer;">REGISTER</button>
        </div>
    </div>

    <div class="header">
        <div class="logo">üïπÔ∏è PIXEL-NET</div>
        <div id="playerDisplay" style="color:var(--neon-blue)">PLAYER: ---</div>
    </div>

    <div class="container">
        <div class="main-content">
            <h2 style="margin-bottom:30px; letter-spacing: 2px;">// SYSTEM LIBRARY</h2>
            <div class="game-grid" id="arcadeGrid"></div>
        </div>

        <div class="stats-panel" style="border: 1px solid var(--neon-blue); padding: 20px;">
            <h3 style="color:var(--neon-blue); border-bottom: 2px solid var(--neon-blue);">üèÜ THE IMMOVABLE DOGS</h3>
            <p>1. ASH - 99,400</p>
            <p>2. KAI - 98,100</p>
            <p>3. BOB - 85,000</p>
        </div>
    </div>

    <div id="tutorialScreen">
        <div class="modal-box">
            <h1 id="tutTitle" style="color:var(--neon-blue)">CONTROLS</h1>
            <div style="text-align:left; margin: 30px 0; line-height: 1.8;">
                <p>üïπÔ∏è <strong>MOVE:</strong> Arrow Keys</p>
                <p>üöÄ <strong>FIRE:</strong> Spacebar</p>
                <p>üí• <strong>TIP:</strong> Kill the Millipede before it reaches the bottom!</p>
            </div>
            <button id="startGameBtn" style="background:var(--neon-green); color:black; padding:15px 50px; border:none; font-weight:bold; cursor:pointer; font-size: 1.2em;">START GAME</button>
            <br><br>
            <button onclick="closeTutorial()" style="background:transparent; color:#555; border:none; cursor:pointer;">[ CANCEL ]</button>
        </div>
    </div>

    <div id="gameOverlay">
        <div class="game-frame"><canvas id="gameCanvas" width="400" height="640"></canvas></div>
        <button style="margin-top:20px; color:red; background:none; border:2px solid red; padding:10px 20px; cursor:pointer;" onclick="location.reload()">[ EJECT ]</button>
    </div>

    <script>
        // Check for saved Initials
        function checkUser() {
            const saved = localStorage.getItem('arcadeInitials');
            if (!saved) {
                document.getElementById('loginScreen').style.display = 'flex';
            } else {
                document.getElementById('playerDisplay').innerText = "PLAYER: " + saved;
            }
        }

        function saveInitials() {
            const val = document.getElementById('playerInitials').value.toUpperCase();
            if (val.length > 0) {
                localStorage.setItem('arcadeInitials', val);
                document.getElementById('loginScreen').style.display = 'none';
                document.getElementById('playerDisplay').innerText = "PLAYER: " + val;
            }
        }

        async function loadArcade() {
            const resp = await fetch('games.json');
            const games = await resp.json();
            const grid = document.getElementById('arcadeGrid');
            
            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'cabinet';
                card.innerHTML = `
                    <img src="${game.image}">
                    <div class="cab-footer">
                        <div class="cab-title">${game.title}</div>
                        <div class="cab-desc">${game.description}</div>
                    </div>
                `;
                card.onclick = () => showTutorial(game);
                grid.appendChild(card);
            });
        }

        function showTutorial(game) {
            document.getElementById('tutTitle').innerText = game.title + " CONTROLS";
            document.getElementById('tutorialScreen').style.display = 'flex';
            document.getElementById('startGameBtn').onclick = () => launchGame(game.script);
        }

        function closeTutorial() { document.getElementById('tutorialScreen').style.display = 'none'; }

        function launchGame(scriptPath) {
            closeTutorial();
            const script = document.createElement('script');
            script.src = scriptPath.includes('games/') ? scriptPath : 'js/games/' + scriptPath;
            document.body.appendChild(script);
            document.getElementById('gameOverlay').style.display = 'flex';
        }

        checkUser();
        window.onload = loadArcade;
    </script>
</body>
</html>
