<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>PIXEL-NET ARCADE</title>
    <style>
        body { background-color: #050505; color: #0f0; font-family: 'Courier New', monospace; margin: 0; }
        
        /* THE HEADER */
        .header { display: flex; justify-content: space-between; padding: 15px 30px; border-bottom: 2px solid #0f0; background: #000; }
        .logo { font-size: 1.8em; font-weight: bold; text-shadow: 2px 2px #ff00ff; }

        /* THE LAYOUT */
        .container { display: grid; grid-template-columns: 3fr 1fr; gap: 20px; padding: 20px; max-width: 1400px; margin: 0 auto; }

        /* GAME CARDS (The "No Sucking" Version) */
        .game-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 25px; }
        
        .cabinet {
            background: #111; border: 2px solid #333; cursor: pointer;
            display: flex; flex-direction: column; overflow: hidden;
        }
        .cabinet:hover { border-color: #0f0; transform: translateY(-5px); box-shadow: 0 0 20px #0f0; }
        
        /* 100% IMAGE FILL */
        .cabinet img { 
            width: 100%; height: 280px; 
            object-fit: cover; /* Fills Left, Right, and Top completely */
            display: block;
        }

        .cab-footer { padding: 15px; background: #000; border-top: 1px solid #222; }
        .cab-title { font-size: 1.4em; font-weight: bold; color: #fff; margin-bottom: 5px; }
        .cab-desc { font-size: 0.85em; color: #888; }

        /* TUTORIAL & LOGIN OVERLAYS */
        .overlay {
            display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.95);
            z-index: 2000; align-items: center; justify-content: center; flex-direction: column;
        }
        .modal { background: #000; border: 3px solid #0ff; padding: 30px; text-align: center; max-width: 400px; }
        
        input { background: #111; border: 2px solid #0f0; color: #0f0; font-size: 2em; text-align: center; width: 150px; outline: none; margin: 20px 0; }
        
        /* THE GAME BOX */
        #gameOverlay { display: none; position: fixed; inset: 0; background: #000; z-index: 3000; flex-direction: column; align-items: center; justify-content: center; }
        .game-frame { border: 4px solid #fff; box-shadow: 0 0 40px #fff; }
    </style>
</head>
<body>

    <div id="loginGate" class="overlay" style="display: flex;">
        <div class="modal" style="border-color: #ff00ff;">
            <h1 style="color:#ff00ff">INSERT COIN</h1>
            <p>ENTER INITIALS</p>
            <input type="text" id="initialsInput" maxlength="3">
            <br>
            <button onclick="saveInitials()" style="background:#ff00ff; color:white; padding:10px 30px; border:none; cursor:pointer; font-family:inherit; font-weight:bold;">START</button>
        </div>
    </div>

    <div class="header">
        <div class="logo">üïπÔ∏è PIXEL-NET</div>
        <div id="playerDisplay">PLAYER: ???</div>
    </div>

    <div class="container">
        <div class="main">
            <h2 style="border-bottom: 1px dashed #333; padding-bottom: 10px;">// ARCADE_FLOOR</h2>
            <div class="game-grid" id="arcadeGrid"></div>
        </div>

        <div class="sidebar">
            <div style="border: 1px solid #0ff; padding: 15px; background: rgba(0,255,255,0.05);">
                <h3 style="color:#0ff; margin-top:0;">üèÜ IMMOVABLE DOGS</h3>
                <p>ASH - 99,400</p>
                <p>KAI - 98,100</p>
                <p>BOB - 85,000</p>
            </div>
        </div>
    </div>

    <div id="tutGate" class="overlay">
        <div class="modal">
            <h1 id="tutTitle">HOW TO PLAY</h1>
            <div style="text-align:left; margin: 20px 0; font-size: 0.9em;">
                <p>üïπÔ∏è MOVE: Arrow Keys</p>
                <p>üöÄ FIRE: Spacebar</p>
                <p>üí• DDT: Shoot yellow boxes to blast!</p>
            </div>
            <button id="startBtn" style="background:#0f0; color:black; padding:10px 40px; border:none; font-weight:bold; cursor:pointer;">PLAY</button>
            <p onclick="closeTut()" style="cursor:pointer; color:#555; margin-top:15px;">[ CANCEL ]</p>
        </div>
    </div>

    <div id="gameOverlay">
        <div class="game-frame"><canvas id="gameCanvas" width="400" height="640"></canvas></div>
        <button onclick="location.reload()" style="margin-top:20px; color:red; border:2px solid red; background:none; padding:10px; cursor:pointer;">[ EJECT ]</button>
    </div>

    <script>
        // 1. Initials Logic
        const savedInitials = localStorage.getItem('arcadeInitials');
        if (savedInitials) {
            document.getElementById('loginGate').style.display = 'none';
            document.getElementById('playerDisplay').innerText = "PLAYER: " + savedInitials;
        }

        function saveInitials() {
            const val = document.getElementById('initialsInput').value.toUpperCase();
            if (val.length > 0) {
                localStorage.setItem('arcadeInitials', val);
                location.reload();
            }
        }

        // 2. Load Games
        async function loadGames() {
            const resp = await fetch('games.json');
            const games = await resp.json();
            const grid = document.getElementById('arcadeGrid');
            
            games.forEach(game => {
                const card = document.createElement('div');
                card.className = 'cabinet';
                card.innerHTML = `
                    <img src="${game.image}">
                    <div class="cab-footer">
                        <div class="cab-title">${game.title}</div>
                        <div class="cab-desc">${game.description}</div>
                    </div>
                `;
                card.onclick = () => {
                    document.getElementById('tutTitle').innerText = game.title;
                    document.getElementById('tutGate').style.display = 'flex';
                    document.getElementById('startBtn').onclick = () => launchGame(game.script);
                };
                grid.appendChild(card);
            });
        }

        function closeTut() { document.getElementById('tutGate').style.display = 'none'; }

        function launchGame(path) {
            closeTut();
            const s = document.createElement('script');
            s.src = path.includes('games/') ? path : 'js/games/' + path;
            document.body.appendChild(s);
            document.getElementById('gameOverlay').style.display = 'flex';
        }

        window.onload = loadGames;
    </script>
</body>
</html>
